<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>The Balance of Attention – Pew ATP 111</title>
  <style>
* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

body {
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;
  overflow: hidden;
  font-family: "Inter", system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
}

.page-wrap {
  width: 100%;
  height: 100%;
  margin: 0;
  padding: 0;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  box-sizing: border-box;
  position: relative;
}

header {
  flex-shrink: 0;
  padding: clamp(8px, 1.2vh, 16px) clamp(12px, 2vw, 20px);
}

header h1 {
  font-size: clamp(1.6rem, 2.5vw + 1.2vh, 2.3rem);
  letter-spacing: 0.14em;
  text-transform: uppercase;
  text-align: center;
  color: #c9184a;
  margin-bottom: clamp(4px, 0.6vh, 6px);
}

.intro-heading {
  text-align: center;
  font-size: clamp(1rem, 1.8vw + 0.8vh, 1.4rem);
  color: #8f304e;
  margin-bottom: clamp(4px, 0.6vh, 8px);
  font-weight: 500;
  padding: 0 clamp(12px, 2vw, 20px);
  flex-shrink: 0;
  line-height: 1.3;
}

.subtitle {
  text-align: center;
  font-size: clamp(0.75rem, 1.1vw + 0.5vh, 0.92rem);
  color: #8f304e;
  opacity: 0.9;
  margin-bottom: clamp(12px, 1.5vh, 18px);
}

.toggle-wrap {
  display: flex;
  justify-content: center;
  gap: clamp(6px, 1vw, 10px);
  margin-bottom: clamp(2px, 0.5vh, 4px);
  flex-shrink: 0;
  padding: clamp(4px, 0.8vh, 8px) 0;
}

.mode-btn {
  border: none;
  padding: clamp(5px, 0.7vh, 7px) clamp(10px, 1.2vw, 14px);
  border-radius: 999px;
  font-size: clamp(0.7rem, 1vw + 0.4vh, 0.8rem);
  cursor: pointer;
  background: #fff;
  color: #8f304e;
  transition: all 0.2s ease;
}

.mode-btn.active {
  background: #ff8fa3;
  color: #fff;
  transform: translateY(-1px);
}

.mode-btn:hover {
  transform: translateY(-1px);
}

.viz-wrap {
  flex: 1;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  padding: clamp(10px, 1.5vh, 20px);
  padding-top: clamp(100px, 15vh, 200px);
  position: relative;
  overflow: visible;
  box-sizing: border-box;
  min-height: 0;
}

.hearts-caption {
  text-align: center;
  font-size: clamp(0.9rem, 1.6vw + 0.7vh, 1.2rem);
  font-weight: bold;
  font-style: italic;
  color: #8f304e;
  margin-bottom: clamp(60px, 10vh, 120px);
  margin-top: 0;
  flex-shrink: 0;
  padding: 0 clamp(12px, 2vw, 20px);
  line-height: 1.3;
}

.scale-wrap {
  position: relative;
  margin: 0 auto;
  width: 100%;
  max-width: 90%;
  flex-shrink: 1;
  min-width: 0;
  transform-origin: center center;
  margin-bottom: clamp(80px, 12vh, 150px);
}

/* Rope above the beam */
.scale-rope {
  position: absolute;
  top: 8px;
  left: 10%;
  right: 10%;
  height: 0;
  border-top: 2px dotted rgba(255, 179, 198, 0.4);
  border-radius: 999px;
  box-shadow: none;
}

/* Beam */
.scale-beam {
  position: relative;
  margin: clamp(16px, 2vh, 26px) auto 0;
  width: 92%;
  height: clamp(4px, 0.6vh, 6px);
  background: #ffd2dd;
  border-radius: 999px;
  transform-origin: 50% 50%;
  transition: transform 0.4s cubic-bezier(.25,.8,.25,1);
  display: flex;
  justify-content: space-between;
  align-items: flex-end;
}

#hearts-middle {
  position: absolute;
  left: 50%;
  bottom: 0;
  transform: translateX(-50%);
  display: flex;
  align-items: flex-end;
  gap: clamp(4px, 0.8vw, 8px);
  padding: clamp(8px, 1.2vh, 12px) clamp(2px, 0.5vw, 4px) 0;
}


.heart-group {
  position: relative;
  display: flex;
  align-items: flex-end;
  gap: clamp(4px, 0.8vw, 8px);
  padding: clamp(8px, 1.2vh, 12px) clamp(2px, 0.5vw, 4px) 0;
}

/* Hearts */
.heart {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 999px;
  cursor: pointer;
  box-shadow: 0 4px 10px rgba(201,24,74,0.15);
  transform-origin: center bottom;
  transition: all 0.25s ease;
  z-index: 1;
}

.heart-label {
  position: absolute;
  bottom: clamp(-16px, -1.5vh, -18px);
  left: 50%;
  transform: translateX(-50%);
  width: max-content;
  font-size: clamp(0.6rem, 1vw + 0.4vh, 0.8rem);
  font-weight: bold;
  color: #8f304e;
  opacity: 0.9;
  white-space: nowrap;
  z-index: 10;
}

/* Sizes */
.heart-often {
  /* remove width/height here */
  font-size: clamp(0.8rem, 1.2vw + 0.5vh, 1.0rem);
  transform: rotate(15deg);
  background: #ff6b81;
  color: #fff;
}

.heart-sometimes {
  /* remove width/height here */
  font-size: clamp(0.8rem, 1.2vw + 0.5vh, 1.0rem);
  transform: rotate(15deg);
  background:#ff9fb3;
  color: #fff;
}

.heart-never {
  /* remove width/height here */
  font-size: clamp(0.8rem, 1.2vw + 0.5vh, 1.0rem);
  transform: rotate(15deg);
  background:#ffd2dd;
  color: #8f304e;
}

.heart-na {
  /* remove width/height here */
  font-size: clamp(0.6rem, 1vw + 0.4vh, 0.7rem);
  transform: rotate(15deg);
  background: #f3dde4;
  color: #8f304e;
}



/* Colors */
.heart-often {
  background: #ff6b81;
  color: #fff;
}

.heart-sometimes {
  background:#ff9fb3;
  color: #fff;
}

.heart-never {
  background:#ffd2dd;
  color: #8f304e;
}

.heart-na {
  background: #f3dde4;
  color: #8f304e;
}

/* Hover pulse */
.heart:hover {
  transform: translateY(-4px) scale(1.06);
  box-shadow: 0 8px 20px rgba(201,24,74,0.26);
}

/* Base */
.scale-base {
  position: relative;
  margin: clamp(12px, 1.8vh, 20px) auto 0;
  width: clamp(36px, 4vw, 46px);
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: clamp(1px, 0.3vh, 2px);
}

.scale-pillar {
  width: clamp(9px, 1.2vw, 11px);
  height: clamp(40px, 5vh, 55px);
  background: #ffb3c6;
  border-radius: 999px;
}

.scale-heart {
  font-size: clamp(1.6rem, 2.5vw + 1vh, 2.2rem);
  text-shadow: 0 4px 10px rgba(201,24,74,0.25);
  color: #8f304e;
}

.legend {
  position: absolute;
  bottom: clamp(8px, 1.5vh, 16px);
  left: 0;
  right: 0;
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: clamp(4px, 0.8vw, 8px);
  font-size: clamp(0.6rem, 1vw + 0.4vh, 0.75rem);
  color: #8f304e;
  padding: 0 clamp(8px, 1.5vw, 16px);
  z-index: 10;
  margin-top: clamp(50px, 8vh, 100px);
}

.legend-item {
  display: inline-flex;
  align-items: center;
  gap: clamp(2px, 0.5vw, 4px);
}

.swatch {
  width: clamp(10px, 1.3vw, 14px);
  height: clamp(10px, 1.3vw, 14px);
  border-radius: 999px;
}

.swatch-often { background: #ff6b81; }
.swatch-sometimes { background: #ff9fb3; }
.swatch-never { background: #ffd2dd; }
.swatch-na { background: #f3dde4; }

/* Tooltip */
.tooltip {
  position: fixed;
  background: rgba(255, 240, 245, 0.98);
  border-radius: 10px;
  padding: 6px 8px;
  font-size: 0.7rem;
  color: #8f304e;
  box-shadow: 0 6px 16px rgba(201,24,74,0.3);
  pointer-events: none;
  opacity: 0;
  transition: opacity 0.15s ease, transform 0.15s ease;
  transform: translateY(4px);
  z-index: 100;
}

.tooltip.visible {
  opacity: 1;
  transform: translateY(0);
}

@media (max-width: 768px) {
  .page-wrap {
    padding: 18px 10px 26px;
  }
  header h1 {
    font-size: 1.8rem;
  }
  .scale-beam {
    width: 86%;
  }
}

</style>
</head>
<body>
  <div class="page-wrap">
    <header>
      <h2 class="intro-heading">In a survey conducted by the Pew Research Center, dating app users answered the following questions:</h2>
    </header>

    <section class="toggle-wrap">
      <button class="mode-btn active" data-mode="insecure">
        View Question 1
      </button>
      <button class="mode-btn" data-mode="overwhelmed">
        View Question 2
      </button>
    </section>

    <div class="hearts-caption" id="hearts-caption"></div>

    <main style="flex: 1; display: flex; flex-direction: column; overflow: hidden; min-height: 0;">
      <section class="viz-wrap">

        <div class="scale-wrap">
          <div class="scale-rope"></div>
          <div class="scale-beam" id="scale-beam">
            <div class="heart-group" id="hearts-left"></div>
            <div class="heart-group" id="hearts-middle"></div> <!-- middle -->
            <div class="heart-group" id="hearts-right"></div>
          </div>
          <div class="scale-base">
            <div class="scale-pillar"></div>
            <div class="scale-heart">❤</div>
          </div>
        </div>

        <div class="legend">
          <div class="legend-item">
            <span class="swatch swatch-often"></span>
            <span>Yes, often</span>
          </div>
          <div class="legend-item">
            <span class="swatch swatch-sometimes"></span>
            <span>Yes, sometimes</span>
          </div>
          <div class="legend-item">
            <span class="swatch swatch-never"></span>
            <span>No, never</span>
          </div>
          <div class="legend-item">
            <span class="swatch swatch-na"></span>
            <span>No answer</span>
          </div>
        </div>
    </main>

    <!-- Tooltip -->
    <div id="tooltip" class="tooltip"></div>
  </div>

  <script>
// The Balance of Attention - Valentine Toggle View
// Data from Pew Research Center, ATP Wave 111 (online dating users, past 12 months)

const data = {
  overwhelmed: {
    label: "In the past 12 months, have you felt overwhelmed by the amount of messages you received?",
    often: { pct: 12, text: "Yes, often" },
    sometimes: { pct: 25, text: "Yes, sometimes" },
    never: { pct: 63, text: "No, I've never felt this way" },
    na: { pct: 1, text: "No answer" }
  },
  insecure: {
    label: "In the past 12 months, have you felt insecure due to the lack of messages you received?",
    often: { pct: 16, text: "Yes, often" },
    sometimes: { pct: 40, text: "Yes, sometimes" },
    never: { pct: 44, text: "No, I've never felt this way" },
    na: { pct: 1, text: "No answer" }
  }
};

const GLOBAL_MAX_PCT = Math.max(
  data.overwhelmed.often.pct,
  data.overwhelmed.sometimes.pct,
  data.overwhelmed.never.pct,
  data.overwhelmed.na.pct,
  data.insecure.often.pct,
  data.insecure.sometimes.pct,
  data.insecure.never.pct,
  data.insecure.na.pct
);



const beam = document.getElementById("scale-beam");
const heartsLeft = document.getElementById("hearts-left");
const heartsRight = document.getElementById("hearts-right");
const heartsMiddle = document.getElementById("hearts-middle");
const caption = document.getElementById("hearts-caption");
const tooltip = document.getElementById("tooltip");
const modeButtons = document.querySelectorAll(".mode-btn");

let currentMode = "insecure";

function setMode(mode) {
  currentMode = mode;
  modeButtons.forEach(btn => {
    btn.classList.toggle("active", btn.dataset.mode === mode);
  });
  render();
}

function createHeart(sizeClass, labelText, pct, alignSide, colorRole, maxPct) {
  const heart = document.createElement("div");
  heart.className = `heart ${sizeClass}`;

  // ---- dynamic size based on pct for THIS slide ----
  // Scale sizes based on viewport to prevent cutoff
  const viewportWidth = window.innerWidth;
  const viewportHeight = window.innerHeight;
  const scaleFactor = Math.min(viewportWidth / 1600, viewportHeight / 910, 1);
  const minSize = Math.max(30, 40 * scaleFactor);  // smallest circle (px)
  const maxSize = Math.max(100, 140 * scaleFactor);  // biggest circle (px)

  // scale 0–1 within this question
  const scale = pct / maxPct;
  const size = minSize + (maxSize - minSize) * scale;
  heart.style.width = `${size}px`;
  heart.style.height = `${size}px`;
  // -----------------------------------------------

  let symbol = "❤";
  if (colorRole === "never") symbol = "❤";
  if (colorRole === "na") symbol = "❤";

  heart.textContent = symbol;

  const label = document.createElement("div");
  label.className = "he